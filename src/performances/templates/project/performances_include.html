{% load humanize %}

{% with report=page.lighthouse_report.first %}
<div class="flex align-middle">
	{% if page.lighthouse_report and page.lighthouse_report.screenshot %}
	<div class="flex items-center"><img src="{{ report.screenshot.url }}" style="max-height: 4em" /></div>
	{% endif %}
	<div class="px-3 text-sm font-medium text-gray-900 flex-grow flex items-center">
		<p><a href="{{ app }}">{% if child.depth == 0 %}
			/{{ 

	<div class="inline mt-2 flex items-center text-sm text-gray-500 px-3">
		{% if app %}
		Waiting for a new run
		{% elif report %}
		{{ report.creation_date|naturaltime }}
		{% else %}
		Waiting for first report
		{% endif %}
	</div>.path }}
		{% else %}
			<span class="text-gray-400 text-sm pr-1">/{{child.path_parent}}</span>{{ child.path_without_parent }}
		{% endif %} 
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3 inline-block ml-2 text-gray-500">
				<path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
			</svg></a>
		</p>
	</div>
	<div class="flex flex-row px-3 py-2">
		{% if report %}
		<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}" class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="{{ report.score_performance }}"></div>
			<p class="text-xs">Performances</p>
		</a>

		<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}#accessibility" class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="{{ report.score_accessibility }}"></div>
			<p class="text-xs">Accessibility</p>
		</a>
		<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}#best-practices" class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="{{ report.score_best_practices }}"></div>
			<p class="text-xs">Best practices</p>
		</a>
		<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}#seo" class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="{{ report.score_seo }}"></div>
			<p class="text-xs">SEO</p>
		</a>
		<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}#pwa" class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="{{ report.score_pwa }}"></div>
			<p class="text-xs">PWA</p>
		</a>

		{% else %}
		<div class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="--"></div>
			<p class="text-xs">Performances</p>
		</div>

		<div class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="--"></div>
			<p class="text-xs">Accessibility</p>
		</div>
		<div class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="--"></div>
			<p class="text-xs">Best practices</p>
		</div>
		<div class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="--"></div>
			<p class="text-xs">SEO</p>
		</div>
		<div class="text-sm text-gray-900 flex flex-col justify-center align-middle text-center px-1">
			<div class="echartgauge" data-score="--"></div>
			<p class="text-xs">PWA</p>
		</div>
		{% endif %}
	</div>
	<div class="flex items-center space-x-1">

		<!-- DROPDOWNM MENU-->
		<div class="relative inline-block text-left" x-data="{ open: false }">
			<div>
				<button
					id="performance-{{ app }}-button"
					type="button"
					class="flex items-center rounded-full text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 focus:ring-offset-gray-100 px-1 py-1"
					aria-expanded="true"
					aria-haspopup="true"
					@click="open = !open"
					@keydown.escape="open = false"
				>
					<span class="sr-only">Open options</span>
					<svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
						<path d="M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM10 8.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zM11.5 15.5a1.5 1.5 0 10-3 0 1.5 1.5 0 003 0z" />
					</svg>
				</button>
			</div>
			<div
				id="performance-{{ app }}-dropdown"
				class="absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
				role="menu"
				aria-orientation="vertical"
				aria-labelledby="menu-button"
				tabindex="-1"
				x-show="open"
				x-transition
				@click.away="open = false"
				style="display: none;"
			>
				<div class="py-1" role="none">
					{% if report %}
					<a href="{% url 'project_performances_report_viewer' report.page.project.id report.id %}" class="text-gray-700 block px-4 py-2 text-sm" role="menuitem" tabindex="-1" id="menu-item-1">See Report</a>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
<!--  -->
{% endwith %}