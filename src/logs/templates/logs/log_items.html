{% load static socialaccount account humanize %}
{% for log in logs %}
    <tr class="{% cycle 'bg-white' 'bg-gray-50' %}">
        <td class="whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900">{{ log.task_name }}</td>
        <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-500">
            <div class="flex items-center space-x-2">
                {% if log.project.favicon_details.favicon %}
                    <img src="{{ log.project.favicon_details.favicon.url }}"
                         alt="{{ log.project.title }} favicon"
                         width="16"
                         height="16"
                         class="w-4 h-4 flex-shrink-0 rounded-sm">
                {% endif %}
                <a href="{% url 'project' log.project.id %}"
                   class="text-emerald-600 hover:text-emerald-900 font-medium">{{ log.project.title }}</a>
            </div>
        </td>
        <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-500">
            {% if log.duration %}
                <span class="duration-display"
                      data-duration="{{ log.duration.total_seconds }}"></span>
            {% else %}
                <span class="text-gray-400">-</span>
            {% endif %}
        </td>
        <td class="px-6 py-4 text-sm text-gray-500">
            {% if "lighthouse" in log.task_name|lower %}
                {% if log.lighthouse.first %}
                    {% with lighthouse_report=log.lighthouse.first %}
                        <a href="{% url 'project_pages_report_viewer' lighthouse_report.page.project.id lighthouse_report.id %}"
                           class="text-emerald-600 hover:text-emerald-900 font-medium"
                           title="{{ lighthouse_report.page.url }}">
                            <span class="url-path" data-full-url="{{ lighthouse_report.page.url }}"></span>
                        </a>
                    {% endwith %}
                {% else %}
                    <span class="text-gray-400">Lighthouse task</span>
                {% endif %}
            {% elif "favicon" in log.task_name|lower %}
                <span class="text-blue-600 font-medium">Favicon fetch</span>
            {% else %}
                <span class="text-gray-400">-</span>
            {% endif %}
        </td>
        <td class="whitespace-nowrap px-6 py-4 text-sm text-gray-500">
            <span title="{{ log.created_at }}">{{ log.created_at|naturaltime }}</span>
        </td>
    </tr>
{% endfor %}
